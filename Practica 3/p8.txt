8)
CONT  EQU 10H
PIC   EQU 20H
PIO   EQU 30H
INT1  EQU 10

ORG 40
GESTOR_INT1 DW GESTOR1

ORG 1000H
GANAS DB "GANASTE"
PIERDES DB "PERDISTE"
CLAVE DB ?
CUENTA DB '9'

ORG 3000H
CONFIGURAR:
;CONIGURO PIO
MOV AL,0FFH
OUT PIO+2,AL
NOT AL
OUT PIO+3,AL
;CONFIGURO PIC
MOV AL,INT1
OUT PIC+5,AL
RET

GESTOR1:
PUSH AX
PUSH BX
MOV BX, OFFSET CUENTA
MOV AL,1
INT 7
DEC BYTE PTR[BX]
CMP BYTE PTR[BX],02FH
JNZ FIN
POP BX
CALL FINALIZAR
FIN:
POP BX
MOV AL,PIC
OUT PIC,AL
MOV AL,0
OUT CONT,AL
POP AX
IRET

FINALIZAR:
CMP AL,[BX]
JNZ PIERDE
MOV BX,OFFSET GANAS
MOV AL,OFFSET PIERDES-OFFSET GANAS
INT 7
JMP CHAU
PIERDE:
MOV BX,OFFSET PIERDES
MOV AL,OFFSET CLAVE-OFFSET PIERDES
INT 7
CHAU:
IN AL,PIC+1
OR AL,0FFH
OUT PIC+1,AL
MOV AL,PIC
OUT PIC,AL
HLT
RET

ORG 2000H
CALL CONFIGURAR
MOV BX,OFFSET CLAVE
MOV AL,1
OUT CONT+1,AL
IN AL,PIC+1
AND AL,11111101B
OUT PIC+1,AL
MOV AL,0
OUT CONT,AL
LOOP:
IN AL,PIO
CMP AL, BYTE PTR[BX]
JZ GANASTE
XOR AL, BYTE PTR[BX]
NOT AL
OUT PIO+1,AL
JMP LOOP
GANASTE:
CALL FINALIZAR
END